<!-- Copyright FUJITSU LIMITED 2018-->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
  <c:if test="#{empty loginHandler}">

  </c:if>

  <nav class="navbar navbar-expand-sm bg-light navbar-light">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#{mpBaseUrl}/index.jsf"> <h:graphicImage value="/marketplace/img/mp_logo2.png"
            alt="My Logo" />
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse" id="navbar">
        <ul class="nav navbar-nav">
          <li class="nav-item active"><a class="nav-link" href="#{mpBaseUrl}/index.jsf?mId=#{mId}"><i
              class="fa fa-fw fa-home"></i>#{msg['navigation.home']}</a></li>

          <ui:fragment rendered="#{user ne null}">
            <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbardrop"
              data-toggle="dropdown"> Menu </a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="#{mpBaseUrl}/subscriptions/index.jsf">#{msg['navigation.subscriptions']}</a>
                <a class="dropdown-item" href="#{mpBaseUrl}/account/index.jsf">#{msg['navigation.myAccount']}</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item"
                  onclick="AdmUtils.showFaq('#{facesContext.externalContext.requestContextPath}', '#{facesContext.viewRoot.locale}');">#{msg['marketplace.help']}</a>
              </div></li>
          </ui:fragment>

        </ul>
        <ul class="nav navbar-nav ml-auto">
          <li><ui:fragment rendered="#{user eq null}">
              <!-- login if user is empty -->
              <c:if test="#{userBean.internalAuthMode}">
                <a href="#" onclick="#{loginHandler}"><i class="fa fa-fw fa-user"></i>
                <h:outputText value="#{msg['login']}" /></a>
              </c:if>
              <c:if test="#{not userBean.internalAuthMode}">
                <a4j:region>
                  <h:form id="formLogin">
                    <h:commandLink id="loginLink" action="#{userBean.redirectToIDP}">
                      <h:outputText value="#{msg['login']}" />
                    </h:commandLink>
                  </h:form>
                </a4j:region>
              </c:if>
            </ui:fragment> <ui:fragment rendered="#{user ne null}">
              <h:form id="formLogout">
                <a4j:outputPanel layout="block" style="float:right;max-width: 90px;">
                  <h:outputText value="&amp;nbsp;|&amp;nbsp;" escape="false" />
                  <c:if test="#{userBean.internalAuthMode}">
                    <h:commandLink id="logout" value="#{msg['logout']}" action="#{userBean.logoff}" />
                  </c:if>
                  <c:if test="#{not userBean.internalAuthMode}">
                    <h:commandLink id="logout" action="#{sessionBean.redirectToIdpLogout}">
                      <h:outputText value="#{msg['logout']}" />
                    </h:commandLink>
                  </c:if>
                </a4j:outputPanel>
                <a4j:outputPanel layout="block" styleClass="shortenedText">
                  <h:outputText id="welcome" value="#{msg['welcome']} #{user.userId}" />
                </a4j:outputPanel>
              </h:form>
            </ui:fragment></li>
        </ul>
      </div>
    </div>
  </nav>

</ui:composition>
